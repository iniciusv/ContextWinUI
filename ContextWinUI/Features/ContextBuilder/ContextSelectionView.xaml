<UserControl
    x:Class="ContextWinUI.Views.Components.ContextSelectionView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:models="using:ContextWinUI.Models"
    xmlns:components="using:ContextWinUI.Views.Components">

	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
		</Grid.RowDefinitions>

		<CommandBar Grid.Row="0" DefaultLabelPosition="Right" Background="Transparent" IsOpen="True">
			<AppBarButton Icon="Save" Label="Salvar" Command="{x:Bind ViewModel.SaveSelectionListCommand}"/>
			<AppBarButton Icon="OpenFile" Label="Carregar" Command="{x:Bind ViewModel.LoadSelectionListCommand}"/>
			<AppBarButton Icon="Paste" Label="Importar" Command="{x:Bind ViewModel.ImportFromTextCommand}" CommandParameter="{x:Bind XamlRoot}"/>
			<AppBarButton Icon="Clear" Label="Limpar" Command="{x:Bind ViewModel.ClearCommand}"/>
		</CommandBar>

		<TextBlock Grid.Row="1" Text="Itens marcados:" Foreground="{ThemeResource TextFillColorSecondaryBrush}" FontSize="12" Margin="16,4,16,8"/>

		<ListView Grid.Row="2" 
                  ItemsSource="{x:Bind ViewModel.SelectedItemsList, Mode=OneWay}" 
                  SelectionMode="Extended"
                  IsItemClickEnabled="True"
                  ItemClick="OnListViewItemClick">
			<ListView.ItemTemplate>
				<DataTemplate x:DataType="models:FileSystemItem">
					<Grid Padding="0,4">
						<Grid.ContextFlyout>
							<Flyout Opening="OnTagMenuOpening" />
						</Grid.ContextFlyout>

						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="Auto"/>
							<ColumnDefinition Width="*"/>
							<ColumnDefinition Width="Auto"/>
						</Grid.ColumnDefinitions>

						<CheckBox Grid.Column="0" IsChecked="{x:Bind IsChecked, Mode=TwoWay}" MinWidth="0" Margin="0,0,12,0" VerticalAlignment="Center"/>

						<StackPanel Grid.Column="1" VerticalAlignment="Center">
							<StackPanel Orientation="Horizontal" Spacing="8">
								<FontIcon Glyph="{x:Bind Icon}" FontSize="12"/>
								<TextBlock Text="{x:Bind Name}" FontWeight="SemiBold"/>
								<components:TagChipsControl TagsSource="{x:Bind SharedState.Tags, Mode=OneWay}"/>
							</StackPanel>
							<TextBlock Text="{x:Bind FullPath}" FontSize="10" Foreground="{ThemeResource TextFillColorSecondaryBrush}" TextTrimming="CharacterEllipsis"/>
						</StackPanel>

						<TextBlock Grid.Column="2" Text="{x:Bind Type}" FontSize="10" Margin="8,0,0,0" VerticalAlignment="Center" Opacity="0.5"/>
					</Grid>
				</DataTemplate>
			</ListView.ItemTemplate>
		</ListView>
	</Grid>
</UserControl>