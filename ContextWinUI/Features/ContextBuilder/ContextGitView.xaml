<UserControl
    x:Class="ContextWinUI.Views.Components.ContextGitView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:models="using:ContextWinUI.Models"
    xmlns:components="using:ContextWinUI.Views.Components">

	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
			<RowDefinition Height="Auto"/>
		</Grid.RowDefinitions>

		<TextBlock Grid.Row="0" Text="Arquivos Modificados" Margin="16,8" Style="{StaticResource SubtitleTextBlockStyle}" FontSize="14"/>

		<ListView Grid.Row="1"
                  ItemsSource="{x:Bind ViewModel.ModifiedItems, Mode=OneWay}"
                  SelectionMode="Extended"
                  IsItemClickEnabled="True"
                  ItemClick="ListView_ItemClick">
			<ListView.ItemTemplate>
				<DataTemplate x:DataType="models:FileSystemItem">
					<Grid Padding="0,4">
						<Grid.ContextFlyout>
							<Flyout Opening="OnTagMenuOpening" />
						</Grid.ContextFlyout>

						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="Auto"/>
							<ColumnDefinition Width="*"/>
							<ColumnDefinition Width="Auto"/>
						</Grid.ColumnDefinitions>

						<CheckBox Grid.Column="0" IsChecked="{x:Bind IsChecked, Mode=TwoWay}" MinWidth="0" Margin="0,0,12,0"/>

						<StackPanel Grid.Column="1" VerticalAlignment="Center">
							<StackPanel Orientation="Horizontal" Spacing="8">
								<FontIcon Glyph="{x:Bind Icon}" FontSize="12" Foreground="DarkOrange"/>
								<TextBlock Text="{x:Bind Name}" FontWeight="SemiBold"/>
								<components:TagChipsControl TagsSource="{x:Bind SharedState.Tags, Mode=OneWay}"/>
							</StackPanel>
							<TextBlock Text="{x:Bind FullPath}" FontSize="10" Foreground="{ThemeResource TextFillColorSecondaryBrush}" TextTrimming="CharacterEllipsis"/>
						</StackPanel>

						<Border Grid.Column="2" Background="#20FFA500" CornerRadius="4" Padding="6,2" Margin="8,0,0,0">
							<TextBlock Text="MOD" FontSize="9" Foreground="DarkOrange" FontWeight="Bold"/>
						</Border>
					</Grid>
				</DataTemplate>
			</ListView.ItemTemplate>
		</ListView>

		<Grid Grid.Row="2" Padding="16,8" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="0,1,0,0">
			<Button HorizontalAlignment="Stretch" Command="{x:Bind ViewModel.RefreshChangesCommand}">
				<StackPanel Orientation="Horizontal" Spacing="8">
					<FontIcon Glyph="&#xE72C;"/>
					<TextBlock Text="Atualizar Status do Git"/>
				</StackPanel>
			</Button>
		</Grid>
	</Grid>
</UserControl>