<UserControl
    x:Class="ContextWinUI.Views.AiChangesView"
    x:Name="RootControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:views="using:ContextWinUI.Views"
    xmlns:converters="using:ContextWinUI.Converters"
    mc:Ignorable="d">

	<UserControl.Resources>
		<converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />

		<converters:NullToVisibilityConverter x:Key="NullToVisibilityConverter" Invert="False"/>
	</UserControl.Resources>

	<Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="450" MinWidth="300"/>
			<ColumnDefinition Width="*"/>
		</Grid.ColumnDefinitions>

		<views:AiControlPanel Grid.Column="0" 
                              DataContext="{x:Bind ViewModel, Mode=OneWay}"
                              HorizontalAlignment="Stretch"
                              VerticalAlignment="Stretch"/>

		<views:AiDiffViewer Grid.Column="1" 
                    DataContext="{x:Bind ViewModel, Mode=OneWay}"
                    HorizontalAlignment="Stretch" 
                    VerticalAlignment="Stretch"/>

		<Grid Grid.ColumnSpan="2" 
              Grid.Column="0"
              Background="#80000000" 
              Visibility="{x:Bind ViewModel.IsProcessing, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}"
              Canvas.ZIndex="99">
			<ProgressRing IsActive="True" Width="60" Height="60"/>
		</Grid>
	</Grid>
</UserControl>