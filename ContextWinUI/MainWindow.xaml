<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="ContextWinUI.MainWindow"
    x:Name="RootWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:views="using:ContextWinUI.Views"
    xmlns:models="using:ContextWinUI.Models"
    xmlns:controls="using:CommunityToolkit.WinUI.Controls"
    mc:Ignorable="d"
    Title="Context WinUI - Explorador de CÃ³digo">

	<Window.SystemBackdrop>
		<MicaBackdrop />
	</Window.SystemBackdrop>

	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
			<RowDefinition Height="Auto"/>
		</Grid.RowDefinitions>

		<Grid Grid.Row="0" Padding="16,8" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="Auto"/>
				<ColumnDefinition Width="*"/>
			</Grid.ColumnDefinitions>

			<Button Content="Selecionar Pasta" 
                    Command="{x:Bind ViewModel.FileExplorer.BrowseFolderCommand}"
                    Style="{StaticResource AccentButtonStyle}"/>

			<TextBlock Grid.Column="1" 
                       Text="{x:Bind ViewModel.FileExplorer.CurrentPath, Mode=OneWay}"
                       VerticalAlignment="Center"
                       Margin="16,0,0,0"
                       TextTrimming="CharacterEllipsis"/>
		</Grid>

		<Grid Grid.Row="1">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="300" MinWidth="150"/>

				<ColumnDefinition Width="12"/>

				<ColumnDefinition Width="*"/>

				<ColumnDefinition Width="12"/>

				<ColumnDefinition Width="350" MinWidth="200"/>
			</Grid.ColumnDefinitions>

			<views:FileExplorerView Grid.Column="0"
                                    ExplorerViewModel="{x:Bind ViewModel.FileExplorer}"
                                    SelectionViewModel="{x:Bind ViewModel.FileSelection}"
                                    FileSelected="OnFileExplorer_FileSelected"/>

			<TextBlock Grid.Column="1" 
                       Text="&#xE769;" 
                       FontFamily="Segoe MDL2 Assets" 
                       HorizontalAlignment="Center" 
                       VerticalAlignment="Center" 
                       Foreground="{ThemeResource SystemControlForegroundAltMediumHighBrush}" 
                       FontSize="8"
                       IsHitTestVisible="False"/>

			<controls:GridSplitter Grid.Column="1" 
                                   ResizeBehavior="BasedOnAlignment"
                                   ResizeDirection="Columns"
                                   Background="Transparent"
                                   HorizontalAlignment="Stretch"/>


			<views:FileContentView Grid.Column="2"
                                   ContentViewModel="{x:Bind ViewModel.FileContent}"
                                   AnalyzeCommand="{x:Bind AnalyzeContextCommand}"
                                   CopySelectedCommand="{x:Bind ViewModel.FileSelection.CopySelectedFilesCommand}"/>

			<TextBlock Grid.Column="3" 
                       Text="&#xE769;" 
                       FontFamily="Segoe MDL2 Assets" 
                       HorizontalAlignment="Center" 
                       VerticalAlignment="Center" 
                       Foreground="{ThemeResource SystemControlForegroundAltMediumHighBrush}" 
                       FontSize="8"
                       IsHitTestVisible="False"/>

			<controls:GridSplitter Grid.Column="3" 
                                   ResizeBehavior="BasedOnAlignment"
                                   ResizeDirection="Columns"
                                   Background="Transparent"
                                   HorizontalAlignment="Stretch"/>

			<views:ContextAnalysisView Grid.Column="4" 
                                       ContextViewModel="{x:Bind ViewModel.ContextAnalysis}"/>
		</Grid>

		<Grid Grid.Row="2" Padding="16,8" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
              BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="0,1,0,0">
			<TextBlock Text="{x:Bind ViewModel.StatusMessage, Mode=OneWay}"
                       FontSize="12"
                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
		</Grid>
	</Grid>
</Window>